<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UniFECAF - Portal do Aluno</title>
    <!-- Importação da fonte Inter do Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome para ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Inclui Tailwind CSS via CDN (necessário para os estilos de gamificação inline) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="static/estilo.css" />
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <!-- Caminho da imagem da logo corrigido para static/image/ -->
                <img src="static/images/logo_2.jpg" alt="UniFECAF Digital logo" />
            </div>
            <h1 class="course-title">Análise e Desenvolvimento de Sistemas</h1>
        </header>

        <main class="main-content">
            <!-- Barra Lateral Esquerda: Grupos, Feroz e Acessibilidade -->
            <aside class="sidebar">
                <button id="openGroupsModalBtn" class="sidebar-button" aria-label="Abrir modal de grupos de estudo">
                    <i class="fas fa-hand-fist"></i> Grupos de Estudo
                </button>
                
                <div class="tutor-section card">
                    <div class="tutor-card">
                        <!-- Caminho da imagem do Feroz corrigido para static/image/ -->
                        <img src="static/images/feroz.png" alt="Feroz - Tutor inteligente" class="tutor-image" id="ferozImage" />
                        <h2>Feroz</h2>
                        <p>Tutor Inteligente</p>
                    </div>
                </div>

                <!-- Seção de Acessibilidade -->
                <div class="accessibility-section card">
                    <h3><i class="fas fa-universal-access"></i> Acessibilidade</h3>
                    <div class="accessibility-controls">
                        <button id="increaseFontBtn" aria-label="Aumentar tamanho da fonte">
                            <i class="fas fa-plus"></i> Fonte
                        </button>
                        <button id="decreaseFontBtn" aria-label="Diminuir tamanho da fonte">
                            <i class="fas fa-minus"></i> Fonte
                        </button>
                        <button id="toggleContrastBtn" aria-label="Alternar modo de alto contraste">
                            <i class="fas fa-adjust"></i> Contraste
                        </button>
                        <button id="toggleGrayscaleBtn" aria-label="Alternar modo escala de cinza">
                            <i class="fas fa-palette"></i> Grayscale
                        </button>
                        <button id="toggleAudioDescriptionBtn" aria-label="Alternar descrição em áudio">
                            <i class="fas fa-volume-up"></i> Áudio Desc.
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Área de Conteúdo Principal: Progresso, Análise e Gamificação -->
            <section class="content-area">
                <!-- Seção de Progresso do Aluno -->
                <div class="progress-section card">
                    <h2 class="section-title"><i class="fas fa-graduation-cap"></i> Progresso do Aluno</h2>
                    <div class="progress-list">
                        <div class="progress-item">
                            <div class="progress-label">Engenharia de Software I</div>
                            <div class="progress-bar-background">
                                <div class="progress-bar" data-progress="75" data-xp="150"></div>
                                <div class="xp-gain-popup">+150 XP!</div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-label">Banco de Dados</div>
                            <div class="progress-bar-background">
                                <div class="progress-bar" data-progress="50" data-xp="100"></div>
                                <div class="xp-gain-popup">+100 XP!</div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-label">Estrutura de Dados</div>
                            <div class="progress-bar-background">
                                <div class="progress-bar" data-progress="90" data-xp="180"></div>
                                <div class="xp-gain-popup">+180 XP!</div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-label">Redes de Computadores</div>
                            <div class="progress-bar-background">
                                <div class="progress-bar" data-progress="30" data-xp="60"></div>
                                <div class="xp-gain-popup">+60 XP!</div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-label">Algoritmos Avançados</div>
                            <div class="progress-bar-background">
                                <div class="progress-bar" data-progress="80" data-xp="160"></div>
                                <div class="xp-gain-popup">+160 XP!</div>
                            </div>
                        </div>
                    </div>
                    <div class="level-info">
                        <div class="level-circle">5</div>
                        <p class="level-text">Nível Atual: Mestre Aprendiz</p>
                    </div>
                </div>

                <!-- Nova Seção de Gamificação com XP e Corações -->
                <div class="gamification-section card">
                    <h2 class="section-title"><i class="fas fa-gamepad"></i> Seu Desafio Feroz</h2>
                    <div class="mb-6 bg-blue-50 p-4 rounded-xl shadow-inner border border-blue-200">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-lg font-bold text-gray-700">Nível: <span id="levelDisplay" class="text-blue-600">1</span></span>
                            <span class="text-lg font-bold text-gray-700">XP: <span id="xpDisplay" class="text-green-600">0</span> / <span id="xpToNextLevelDisplay" class="text-green-600">100</span></span>
                        </div>
                        <div class="xp-bar-container">
                            <div id="xpProgressBar" class="xp-bar-fill" style="width: 0%;"></div>
                        </div>
                    </div>

                    <!-- Seção de Corações -->
                    <div class="mb-8 bg-red-50 p-4 rounded-xl shadow-inner border border-red-200">
                        <h2 class="text-lg font-bold text-gray-700 mb-2">Corações:</h2>
                        <div id="heartsDisplay" class="text-red-500 text-4xl flex justify-center space-x-2">
                            <!-- Corações serão renderizados aqui pelo JS -->
                        </div>
                    </div>

                    <!-- Mensagem de Game Over (oculta por padrão) -->
                    <div id="gameOverMessage" class="hidden text-red-600 font-bold text-2xl mt-4 animate-bounce">
                        Game Over! Tente novamente.
                    </div>

                    <!-- Botões de Ação de Gamificação -->
                    <div class="flex flex-col space-y-4">
                        <button id="gainXpButton" class="action-button bg-gradient-to-r from-blue-500 to-blue-600 text-white hover:from-blue-600 hover:to-blue-700 active:shadow-inner px-6 py-3 rounded-xl shadow-lg transition-all duration-300 ease-in-out font-semibold">
                            Ganhar XP (Tarefa Concluída)
                        </button>
                        <button id="loseHeartButton" class="action-button bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700 active:shadow-inner px-6 py-3 rounded-xl shadow-lg transition-all duration-300 ease-in-out font-semibold">
                            Perder Coração (Erro na Questão)
                        </button>
                        <button id="resetButton" class="action-button bg-gradient-to-r from-gray-400 to-gray-500 text-white hover:from-gray-500 hover:to-gray-600 active:shadow-inner px-6 py-3 rounded-xl shadow-lg transition-all duration-300 ease-in-out font-semibold">
                            Reiniciar Jogo
                        </button>
                    </div>
                </div>

                <!-- Seção de Análise da Disciplina -->
                <div class="analysis-section card">
                    <h2 class="section-title"><i class="fas fa-chart-line"></i> Análise da Disciplina</h2>
                    <div class="analysis-content">
                        <div class="analysis-card warning">
                            <i class="fas fa-exclamation-circle"></i>
                            <div class="analysis-text">
                                <h4>Atenção em Matemática Discreta!</h4>
                                <p>Você tem <strong>2 desafios pendentes</strong>. Sugerimos revisar os tópicos de Lógica Proposicional.</p>
                            </div>
                        </div>
                        <div class="analysis-card success">
                            <i class="fas fa-check-circle"></i>
                            <div class="analysis-text">
                                <h4>Parabéns em Introdução à Programação!</h4>
                                <p>Você concluiu este módulo com <strong>excelência</strong>. Continue assim!</p>
                            </div>
                        </div>
                        <div class="analysis-card info">
                            <i class="fas fa-lightbulb"></i>
                            <div class="analysis-text">
                                <h4>Dica para Álgebra Linear:</h4>
                                <p>Lembre-se de revisar os conceitos de transformações lineares antes do próximo módulo. O Feroz pode ajudar!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Chat Overlay -->
        <div class="chat-overlay" id="chatOverlay">
            <div class="chat-window">
                <div class="chat-header">
                    <h3>Feroz - Tutor Inteligente</h3>
                    <button class="close-chat-btn" id="closeChatBtn" aria-label="Fechar chat">&times;</button>
                </div>
                <div class="message-area" id="chatMessages">
                    <!-- Mensagens do chat serão adicionadas aqui pelo JS -->
                </div>
                <form id="messageForm" class="chat-input-form">
                    <!-- Área de pré-visualização de upload -->
                    <div id="fileUploadPreview" class="file-upload-preview" style="display: none;">
                        <span id="fileNameDisplay" class="file-name-display"></span>
                        <button id="cancelUploadBtn" class="cancel-upload-btn" aria-label="Cancelar upload de vídeo">&times;</button>
                    </div>
                    <div class="chat-input-row">
                        <input type="file" id="videoUploadInput" accept="video/*" class="hidden-file-input" aria-label="Selecionar arquivo de vídeo para upload">
                        <label for="videoUploadInput" class="upload-video-icon-btn" aria-label="Fazer upload de vídeo">
                            <i class="fas fa-video"></i>
                        </label>
                        <input type="text" id="userInput" placeholder="Digite sua mensagem..." aria-label="Digite sua mensagem no chat" />
                        <button type="submit" id="sendMessageBtn" aria-label="Enviar mensagem">
                            Enviar
                            <div id="loadingIndicator" role="status" aria-label="Enviando mensagem"></div>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Modal de Grupos -->
        <div class="groups-modal-overlay" id="groupsModalOverlay">
            <div class="groups-modal-window">
                <div class="groups-modal-header">
                    <h3><i class="fas fa-shield-alt"></i> Pesquisar Grupos de Estudo</h3>
                    <button class="close-groups-modal-btn" id="closeGroupsModalBtn" aria-label="Fechar modal de grupos">&times;</button>
                </div>
                <div class="groups-modal-content">
                    <input type="text" id="groupSearchInput" placeholder="Buscar grupo por nome ou disciplina..." aria-label="Campo de busca de grupos" />
                    <div id="groupSearchResults" class="group-results-list" role="list">
                        <!-- Exemplos de Grupos -->
                        <div class="group-item" data-group-name="Grupo de Estudos BD I" role="listitem">
                            <i class="fas fa-database group-icon"></i>
                            <span class="group-name">Grupo de Estudos BD I</span>
                            <span class="group-members"><i class="fas fa-users"></i> 15</span>
                            <button class="join-group-btn" aria-label="Entrar no grupo: Grupo de Estudos BD I">Entrar</button>
                        </div>
                        <div class="group-item" data-group-name="Desafios de Programação" role="listitem">
                            <i class="fas fa-laptop-code group-icon"></i>
                            <span class="group-name">Desafios de Programação</span>
                            <span class="group-members"><i class="fas fa-users"></i> 22</span>
                            <button class="join-group-btn" aria-label="Entrar no grupo: Desafios de Programação">Entrar</button>
                        </div>
                        <div class="group-item" data-group-name="Algoritmos Avançados" role="listitem">
                            <i class="fas fa-infinity group-icon"></i>
                            <span class="group-name">Algoritmos Avançados</span>
                            <span class="group-members"><i class="fas fa-users"></i> 8</span>
                            <button class="join-group-btn" aria-label="Entrar no grupo: Algoritmos Avançados">Entrar</button>
                        </div>
                        <div class="group-item" data-group-name="Projeto Final ADS" role="listitem">
                            <i class="fas fa-lightbulb group-icon"></i>
                            <span class="group-name">Projeto Final ADS</span>
                            <span class="group-members"><i class="fas fa-users"></i> 4</span>
                            <button class="join-group-btn" aria-label="Entrar no grupo: Projeto Final ADS">Entrar</button>
                        </div>
                        <div class="group-item" data-group-name="Tópicos em Engenharia de Software" role="listitem">
                            <i class="fas fa-cogs group-icon"></i>
                            <span class="group-name">Tópicos em Engenharia de Software</span>
                            <span class="group-members"><i class="fas fa-users"></i> 10</span>
                            <button class="join-group-btn" aria-label="Entrar no grupo: Tópicos em Engenharia de Software">Entrar</button>
                        </div>
                    </div>
                    <button class="create-group-btn" aria-label="Criar novo grupo de estudo"><i class="fas fa-plus-circle"></i> Criar Novo Grupo</button>
                </div>
            </div>
        </div>

        <!-- Container para mensagens temporárias (sucesso/erro) -->
        <div id="messageContainer" role="alert" aria-live="polite"></div>

        <!-- Elemento de áudio para descrições -->
        <audio id="audioDescriptionPlayer" aria-hidden="true"></audio>
    </div>

    <script src="static/script.js"></script>
</body>
</html>
